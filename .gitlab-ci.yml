    stages:
      - cleanup
      - clone
      - build
      - deploy
    variables:
      DIR_NAME: "Ansible Roles"

    cleanup_config:
      tags:
        - mkdocs
      stage: cleanup
      script:
        - if [ -d /var/www/base/docs/"$DIR_NAME" ]; then rm -rf /home/gitlab-runner/$CI_PROJECT_NAME; fi
        - if ! [ -d /var/www/base/docs/"$DIR_NAME" ]; then sudo mkdir /var/www/base/docs/"$DIR_NAME"; else sudo rm -rf /var/www/base/docs/"$DIR_NAME"; sudo mkdir /var/www/base/docs/"$DIR_NAME"; fi
    clone_config:
      tags:
        - mkdocs
      stage: clone
      script:
        - git -C /home/gitlab-runner/ clone $CI_REPOSITORY_URL
<<<<<<< HEAD
=======
        - git -C /home/gitlab-runner/$CI_PROJECT_NAME clone http://gitlab-lb-01.gvc.oao.rzd/PinkFury/material.git
>>>>>>> a0c2deb3f08426a636cf0137f28102d57624530b
    build_config:
      tags:
        - mkdocs
      stage: build
      script:
        - sudo su - mkdocs -c "cd /home/gitlab-runner/$CI_PROJECT_NAME/; mkdocs build"
    deploy_config:
      tags:
        - mkdocs
      stage: deploy
      script:
        - cd /home/gitlab-runner/$CI_PROJECT_NAME/
        - sudo mv site/* /var/www/base/docs/"$DIR_NAME"
        - rm -rf /home/gitlab-runner/$CI_PROJECT_NAME